<!DOCTYPE html>
<html>
<head>
    <title>National CyberSecurity Index 2023 Visualization</title> 
    <script src="https://cdn.jsdelivr.net/npm/vega@5.22.1"></script>
    <script src="https://cdn.jsdelivr.net/npm/vega-lite@5.2.0"></script>
    <script src="https://cdn.jsdelivr.net/npm/vega-embed@6.20.8"></script>
</head>
<body>
    <div class="introduction">
        <h1>National CyberSecurity Index 2023 Visualization</h1>
    </div>
    <div id="vis"></div>
    <script>
      const spec = {
        "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
        "config": {
          "background": "#cce6ff"  // Light blue ocean background
        },
        "title": "National CyberSecurity Index 2023",
        "width": 800,
        "height": 400,
        "projection": {"type": "equalEarth"},
        
        "layer": [
          // Ocean background layer
          {
            "mark": "rect",
            "width": 800,
            "height": 400,
            "encoding": {
              "color": {
                "value": "#cce5ff" // Ocean color
              }
            }
          },
          // Graticule layer (grid lines)
          {
            "data": {"graticule": true},
            "mark": {"type": "geoshape", "stroke": "lightgray", "strokeWidth": 0.5}
          },
          // Main map layer with countries and cybersecurity index
          {
            "data": {
              "url": "https://raw.githubusercontent.com/celineoww/FIT3179_A2/main/js/ne_110m.json",
              "format": {"type": "topojson", "feature": "ne_110m_admin_0_countries"}
            },
            "transform": [
              {
                "lookup": "properties.NAME",
                "from": {
                  "data": {
                    "url": "https://raw.githubusercontent.com/celineoww/FIT3179_A2/main/data/NationalCyberSecurityIndex.csv"
                  },
                  "key": "Country",
                  "fields": ["National Cyber Security Index"]
                }
              }
            ],
            "mark": {"type": "geoshape"},
            "encoding": {
              "color": {
                "field": "National Cyber Security Index",
                "type": "quantitative",
                "scale": {
                  "domain": [50, 100],
                  "range": ["#fdbe85", "#fd8d3c", "#e6550d", "#a63603"]
                },
                "legend": {"title": "Cybersecurity Index Score"}
              },
              "tooltip": [
                {"field": "properties.NAME", "type": "nominal", "title": "Country"},
                {"field": "National Cyber Security Index", "type": "quantitative"}
              ]
            }
          }
        ]
        
      };
      

      vegaEmbed("#vis", spec, {mode: "vega-lite"}).then(console.log).catch(console.warn);
    </script>
</body>
</html>
